<div class="actions-container">
    <mat-form-field class="filter-input">
      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter customer">
    </mat-form-field>
    <button mat-fab color="primary" (click)="addNewOrder()">
        <mat-icon aria-label="Add new order">add</mat-icon>
    </button>
</div>
<table mat-table [dataSource]="orders" matSort class="orders-list">
  <ng-container matColumnDef="created">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Created </th>
    <td mat-cell *matCellDef="let order"> {{order.created.toDate() | date: 'dd/MM/yyyy HH:mm'}} </td>
  </ng-container>
  <ng-container matColumnDef="customer">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Customer </th>
    <td mat-cell *matCellDef="let order"> {{order.customer.name | titlecase}}, {{order.customer.address | titlecase}} {{order.customer.city | titlecase}}, {{order.customer.country | titlecase}}</td>
  </ng-container>
  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef> Price </th>
    <td mat-cell *matCellDef="let order"> <div [ngClass]="{discounted: order.discount}">{{order.price | currency:order.currency}}</div><div *ngIf="order.discount">{{order.discountedPrice | currency:order.currency}} ({{order.discount | percent}} off)</div> </td>
  </ng-container>
  <ng-container matColumnDef="shipping">
    <th mat-header-cell *matHeaderCellDef> Shipping </th>
    <td mat-cell *matCellDef="let order"> {{order.shipping | currency:order.currency }} </td>
  </ng-container>
  <ng-container matColumnDef="subtotal">
    <th mat-header-cell *matHeaderCellDef> Subtotal </th>
    <td mat-cell *matCellDef="let order"> {{order.subtotal | currency:order.currency }} </td>
  </ng-container>
  <!-- Star Column -->
  <ng-container matColumnDef="star" stickyEnd>
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let order">
        <mat-icon class="selection" aria-label="Actions" [matMenuTriggerFor]="actionMenu">more_vert</mat-icon>
        <mat-menu #actionMenu="matMenu">
          <button mat-menu-item>Edit order</button>
          <button mat-menu-item>Print for customer</button>
          <button mat-menu-item>Save to COMAX</button>
          <button mat-menu-item>Print shipping statement</button>
          <button mat-menu-item>Add/Edit sketch</button>
        </mat-menu>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
</table>
